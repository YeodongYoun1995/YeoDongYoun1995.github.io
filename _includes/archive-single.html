{% include base_path %}

{% assign current_category = nil %}
{% assign category_counter = 0 %} <!-- Initialize a counter for numbering -->

{% for post in site.publications reversed %}
  <!-- Subsection Title -->
  {% if post.category != current_category %}
    {% assign current_category = post.category %}
    <h2>{{ current_category | capitalize }}</h2>
    {% assign category_counter = 0 %} <!-- Reset counter for each category -->
  {% endif %}

  {% assign category_counter = category_counter | plus: 1 %} <!-- Increment counter -->

    <!-- Publication Entry -->
  <div class="publication-entry" style="margin-bottom: 0.8em;">
    <!-- Number and Title -->
    <div style="display: flex; align-items: baseline; margin: 0; font-weight: bold; line-height: 1.1;">
      <div style="margin-right: 0.5em;">{{ category_counter }}.</div>
      <div>{{ post.title | markdownify | strip }}</div>
    </div>
  
    <!-- Authors -->
    <p style="margin: 0.1em 0; line-height: 1.2;">
      {{ post.authors | markdownify | strip }}
    </p>
  
    <!-- Venue, Year, and PDF Link -->
    <div style="display: flex; align-items: baseline; margin: 0; line-height: 1.1; flex-wrap: wrap;">
      <div style="margin-right: 0.8em; font-style: italic;">
        {{ post.venue | markdownify | strip }}
      </div>
      <div style="margin-right: 0.8em;">
        {{ post.date | date: "%Y" }}
      </div>
      {% if post.paperurl %}
        <div>
          [<a href="{{ post.paperurl }}">PDF</a>]
        </div>
      {% endif %}
    </div>
  </div>
{% endfor %}
